<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="hungry.dev"/><link rel="canonical" href="https://hungry.dev/posts/2020/base64-encoding-options"/><meta name="twitter:url" content="https://hungry.dev/posts/2020/base64-encoding-options"/><meta name="og:url" content="https://hungry.dev/posts/2020/base64-encoding-options"/><title>Base64EncodingOptions by Example | hungry.dev</title><meta name="twitter:title" content="Base64EncodingOptions by Example | hungry.dev"/><meta name="og:title" content="Base64EncodingOptions by Example | hungry.dev"/><meta name="description" content="Personal blog."/><meta name="twitter:description" content="Personal blog."/><meta name="og:description" content="Personal blog."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/primer.css" type="text/css"/><link rel="stylesheet" href="/github.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to hungry.dev"/></head><body><header><div class="border-bottom border-gray-light"><div class="container-md px-3 my-3 markdown-body"><h3><a class="text-gray-dark no-underline" href="/">hungry.dev</a></h3></div></div></header><div class="container-md px-3 my-5 markdown-body"><p class="text-small text-gray">8 March 2020</p><h1>Base64EncodingOptions by Example</h1><p>Encoding binary data to <a href="https://en.wikipedia.org/wiki/Base64">Base64</a> is a common operation in the programming world. Simplest usecase is probably to transport binary data over the network in common encoding so it doesn't get currupt while being processed by different systems. There are more <a href="https://en.wikipedia.org/wiki/Base64#Implementations_and_history">usecases</a>, some of them are also mentioned in examples bellow.</p><p>In this article we will go over the different encoding options provided in Apple's <a href="https://developer.apple.com/documentation/foundation">Foundation</a> framework as part of the <a href="https://developer.apple.com/documentation/foundation/data"><code>Data</code></a> object.</p><h2>Example Data</h2><p>In the examples bellow, example data is encoded using <a href="https://developer.apple.com/documentation/foundation/nsdata/1413546-base64encodedstring"><code>base64EncodedString(options:)</code></a> instance method on <code>Data</code>. Same options can be applied with <a href="https://developer.apple.com/documentation/foundation/nsdata/1412739-base64encodeddata"><code>base64EncodedData(options:)</code></a>.</p><p>To keep it simple, example data is one hundreed 1s generated like so:</p><pre><code><span class="kd">let</span> <span class="nv">data</span> <span class="p">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">repeating</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">count</span><span class="p">:</span> <span class="mi">100</span><span class="p">)</span>
</code></pre><h2>Options</h2><h3><code>[]</code> (No options)</h3><p>Default and most commonly used operation. Encodes data without any options and returns the result as a single line string.</p><h5>Usage</h5><pre><code><span class="n">data</span><span class="p">.</span><span class="n">base64EncodedString</span><span class="p">()</span>
</code></pre><h5>Result</h5><pre><code>AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQ==
</code></pre><h3>Line Length</h3><p>Line length options give us the posibility to limit the amount of characters before a line ending is inserted.</p><blockquote><p>⚠️ Only one line length option should be provided, otherwise all options are ignored and the result is returned on a single line.</p></blockquote><hr><h4><a href="https://developer.apple.com/documentation/foundation/nsdata/base64encodingoptions/1407872-linelength64characters"><code>lineLength64Characters</code></a></h4><h5>Usage</h5><pre><code><span class="n">data</span><span class="p">.</span><span class="n">base64EncodedString</span><span class="p">(</span><span class="n">options</span><span class="p">:</span> <span class="p">.</span><span class="n">lineLength64Characters</span><span class="p">)</span>
</code></pre><h5>Pretty Result</h5><pre><code>AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQ==
</code></pre><h5>Raw Result</h5><pre><code>AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\r\nAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\r\nAQEBAQ==
</code></pre><p>Inserts a line ending in form of <code>\r\n</code> every 64 characters. We'll get to what <code>\r\n</code> means and how it can be modified in the Line End section.</p><blockquote><p>Most common usecase of having line length limited to 64 characters is in the <strong>privacy-enhanced mail (PEM) standard which is nowadays mostly used to transport certificates and cryptographic keys over the network</strong>. You can read more about it in the <em>Printable Encoding</em> section of <a href="https://tools.ietf.org/html/rfc1421#section-4.3.2.4">RFC 1421</a>.</p></blockquote><hr><h4><a href="https://developer.apple.com/documentation/foundation/nsdata/base64encodingoptions/1413700-linelength76characters"><code>lineLength76Characters</code></a></h4><h5>Usage</h5><pre><code><span class="n">data</span><span class="p">.</span><span class="n">base64EncodedString</span><span class="p">(</span><span class="n">options</span><span class="p">:</span> <span class="p">.</span><span class="n">lineLength76Characters</span><span class="p">)</span>
</code></pre><h5>Pretty Result</h5><pre><code>AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQ==
</code></pre><h5>Raw Result</h5><pre><code>AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\r\nAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQ==
</code></pre><p>Similar as <code>lineLength64Characters</code>, expect a line ending is inserted every 76 characters.</p><blockquote><p>Most common usecase of 76 character line length is for <strong>Multipurpose Internet Mail Extensions (MIME) standard which is used to transport email messages</strong>. Check out the <em>Base64 Content-Transfer-Encoding</em> section of <a href="https://tools.ietf.org/html/rfc2045#section-6.8">RFC 2045</a> for more information.</p></blockquote><hr><h3>Line End</h3><p>Prerequisite for line end options to have an effect is to pair them with one of the line length options, otherwise the result is a single line string and no line endings are inserted. By default all (two) line end options are enabled as shown in Line Length examples.</p><p>The following examples use <code>lineLength64Characters</code> as a required line length option. For that reason pretty results are not shown on a per option basis since they all look the same:</p><pre><code>AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQ==
</code></pre><hr><h4><a href="https://developer.apple.com/documentation/foundation/nsdata/base64encodingoptions/1407202-endlinewithcarriagereturn"><code>endLineWithCarriageReturn</code></a></h4><h5>Usage</h5><pre><code><span class="n">data</span><span class="p">.</span><span class="n">base64EncodedString</span><span class="p">(</span><span class="n">options</span><span class="p">:</span> <span class="p">[.</span><span class="n">lineLength64Characters</span><span class="p">,</span> <span class="p">.</span><span class="n">endLineWithCarriageReturn</span><span class="p">])</span>
</code></pre><h5>Raw Result</h5><pre><code>AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\rAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\rAQEBAQ==
</code></pre><p>Line endings contain only <code>\r</code>, which is the control character for carriage return.</p><blockquote><p><a href="https://en.wikipedia.org/wiki/Carriage_return">Carriage return</a> is a control character from the typewriter era that is somehow still around even though its purpose in the modern technology days seems questionable.</p></blockquote><hr><h4><a href="https://developer.apple.com/documentation/foundation/nsdata/base64encodingoptions/1415882-endlinewithlinefeed"><code>endLineWithLineFeed</code></a></h4><h5>Usage</h5><pre><code><span class="n">data</span><span class="p">.</span><span class="n">base64EncodedString</span><span class="p">(</span><span class="n">options</span><span class="p">:</span> <span class="p">[.</span><span class="n">lineLength64Characters</span><span class="p">,</span> <span class="p">.</span><span class="n">endLineWithLineFeed</span><span class="p">])</span>
</code></pre><h5>Raw Result</h5><pre><code>AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\nAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\nAQEBAQ==
</code></pre><p>Line endings contain only <code>\n</code>, which is a control character for line feed.</p><blockquote><p>Very useful combination when dealing with cryptographic entities such as keys and certificates since they are mostly transported in PEM format.</p></blockquote></div><footer><div class="container-md px-3 my-5 markdown-body"><div class="d-flex flex-justify-center"><p class="text-small text-gray v-align-middle">Styled with <a href="https://primer.style">Primer</a> | Generated using <a href="https://github.com/johnsundell/publish">Publish</a> | Hosted on <a href="https://pages.github.com">GitHub Pages</a></p></div></div></footer></body></html>